package db

import (
	"context"
	"sync"
)

type RepositoryStub struct {
	store sync.Map
}

func (r *RepositoryStub) GetLastScan(ctx context.Context, image string) (*ImageScanDto, error) {
	result, _ := r.store.Load(image)
	if result == nil {
		return nil, nil
	}
	return result.(*ImageScanDto), nil
}

func (r *RepositoryStub) AddScan(ctx context.Context, image string, scan *ImageScanDto) error {
	r.store.Store(image, scan)
	return nil
}
