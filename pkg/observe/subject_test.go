package observe

import (
	"testing"

	"github.com/equinor/radix-vulnerability-scanner/pkg/observe/fake"
	"github.com/stretchr/testify/assert"
)

func Test_Subject(t *testing.T) {
	var receivedStrings []string
	fakeObserver := fake.FakeStringObserver{OnReceive: func(receivedObj string) { receivedStrings = append(receivedStrings, receivedObj) }}
	sut := NewSubject[string]()
	sut.AttachObserver(&fakeObserver)
	sut.Next("foo")
	sut.Next("bar")
	assert.Equal(t, []string{"foo", "bar"}, receivedStrings)
}
