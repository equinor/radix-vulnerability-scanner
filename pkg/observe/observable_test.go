package observe

import (
	"testing"

	v1 "github.com/equinor/radix-operator/pkg/apis/radix/v1"
	"github.com/stretchr/testify/assert"
)

func Test_Observable(t *testing.T) {
	rd := &v1.RadixDeployment{}
	var actualRd *v1.RadixDeployment
	fakeObserver := &fakeRadixDeploymentObserver{OnReceive: func(obj *v1.RadixDeployment) { actualRd = obj }}
	sut := observable[*v1.RadixDeployment]{}
	sut.AttachObserver(fakeObserver)
	sut.notifyObservers(rd)
	assert.Equal(t, rd, actualRd)
}
